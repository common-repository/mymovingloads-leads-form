var use_google=!1;function gm_authFailure(){console.log("Unauthorized API key"),use_google=!1}function testApiCredentials(){try{var e=new google.maps.places.AutocompleteService;e.getQueryPredictions({input:"new york, ny, us",types:["geocode"]},function(e,t){"OK"==t?use_google=!0:"REQUEST_DENIED"==t?console.log("Places API is not enabled."):console.log("Problem with Google Places API.")})}catch(e){console.error(e)}}!function(e){e(document).ready(function(){var t=["at","ch","de","gb","nz"],a=["au","ca","us"];try{if("undefined"!==e.cookie("mml_name")){var m=e.cookie("mml_name");e("input[name=mml_customer_name]").val(m)}if("undefined"!==e.cookie("mml_email")){m=e.cookie("mml_email");e("input[name=mml_customer_email]").val(m)}if("undefined"!==e.cookie("mml_email")){m=e.cookie("mml_phone");e("input[name=mml_customer_phone]").val(m)}}catch(e){console.log("You are missing jquery.cookie.js")}function l(e,t){if(use_google){t||(t="");var a={types:["(cities)"],componentRestrictions:{country:t}},m=new google.maps.places.Autocomplete(e.get(0),a);google.maps.event.addListener(m,"place_changed",function(){!function(e){try{var t=e,a=t.val().split(",");t.val(a[0])}catch(e){console.log(e)}}(e)})}}var n=new Date,o=new Date(n.getTime()+864e5),s=[],r="",_="",c=function(){var t=e(this),a=t.closest("form.mml_form").find(e("input[name=mml_dateiso]")),m=new Date,l=(new Date(a.val()).getTime()-m.getTime())/864e5;isNaN(l)||(Math.round(l)>0?(t.parent().find(".mml_days_left_wrap").attr("style","opacity:1;"),1==Math.round(l)?t.parent().find(".mml_days_left_wrap").html('About <span class="mml_days_left">'+Math.round(l)+"</span><br/>day left"):t.parent().find(".mml_days_left_wrap").html('About <span class="mml_days_left">'+Math.round(l)+"</span><br/>days left")):(t.parent().find(".mml_days_left_wrap").attr("style","opacity:1;"),t.parent().find(".mml_days_left_wrap").html('<span class="mml_days_left">Soon</span>')))};if("1"==mml_object.totrack){var d=e("form.mml_form").attr("data-abr");try{"function"==typeof gtag?gtag("event",d,{event_category:"MoveAdvisor Form",event_label:"Successfully-Viewed"}):"function"==typeof ga?ga("send","event","MoveAdvisor Form",d,"Successfully-Viewed"):"function"==typeof _gaq&&_gaq.push(["_trackEvent","MoveAdvisor Form",d,"Successfully-Viewed"])}catch(e){console.log("No Google Analytics active")}}function f(e,t,a){origin=e,destination=t,unit_system=a?google.maps.UnitSystem.METRIC:google.maps.UnitSystem.IMPERIAL,(new google.maps.DistanceMatrixService).getDistanceMatrix({origins:[origin],destinations:[destination],travelMode:google.maps.TravelMode.DRIVING,unitSystem:unit_system,avoidHighways:!1,avoidTolls:!1},u)}function u(t,a){if(a==google.maps.DistanceMatrixStatus.OK){t.originAddresses,t.destinationAddresses;results=t.rows,result=results[0].elements[0],result_status=result.status;var m=e("span.mml_distance");if("OK"==result_status){var l=result.distance.text;m.text("About "+l)}}}e(".mml_leadform_wrapper").on("click","a.mml_switch",function(t){var a=e(this),m=e(this).closest("div.mml_leadform_wrapper").find("form.mml_form"),l=m.attr("data-abr"),i=a.attr("data-to");switch(l){case"us":switch_text="Switch to United States form";break;case"uk":switch_text="Switch to United Kingdom form";break;case"ca":switch_text="Switch to Canada form";break;case"au":switch_text="Switch to Australia form";break;case"nz":switch_text="Switch to New Zealand form";break;case"de":switch_text="Deutschland?";break;default:l="int",switch_text="Switch to international form"}if(e('input[name="mml_dateiso"]').val(""),function(t,a,m,l){if(a.find(".mml_body-wrap").slideUp("100"),a.find(".mml_body-wrap").html(),mml_object.language,"en"==mml_object.language)var i=mml_object.plugin+"includes/templates/en/mml_leadform_"+t+".html.php";else i=mml_object.plugin+"includes/templates/en/mml_leadform_"+t+".html.php";e.get(i,function(i,n){if("success"==n)return a.find(".mml_body-wrap").html(i),a.find(".mml_body-wrap").slideDown("100"),a.attr("data-abr",t),"int"==t&&a.find('select[name="mml_origin_country"] > option').each(function(){if(mml_object.user_country==this.value.toLowerCase())return e(this).attr("selected","selected"),a.find('select[name="mml_origin_country"]').trigger("change"),!1}),a.find("div.mml_switch_int-wrap").show(),a.find("a.mml_switch").attr("data-to",m).removeClass("mml_switch_"+t).addClass("mml_switch_"+m).html(l),!0;a.find(".mml_body-wrap").html("No form for this country. Please refresh page.")})}(i,m,l,switch_text),"1"==mml_object.totrack)try{"function"==typeof gtag?gtag("event",l,{event_category:"MoveAdvisor Form",event_label:"Successfully-Viewed"}):"function"==typeof ga?ga("send","event","MoveAdvisor Form",l,"Successfully-Viewed"):"function"==typeof _gaq&&_gaq.push(["_trackEvent","MoveAdvisor Form",l,"Successfully-Viewed"])}catch(e){console.log("No Google Analytics active")}t.preventDefault()}),e("form.mml_form").on("click",".mml_moving_date",function(){var t=e(this);t.hasClass("mml_date_format_uk")?t.datepicker({altFormat:"yy-mm-dd",altField:"input[name=mml_dateiso]",showAnim:"slideDown",ignoreReadonly:!0,minDate:o,maxDate:"+6m",showOn:"focus",firstDay:1,dateFormat:"dd/mm/yy",beforeShow:function(t,a){var m=e(t).offset(),l=e(t).outerHeight(),i=m.top,n=m.left;setTimeout(function(){a.dpDiv.css({top:i+l,left:n})},0)}}).focus():t.hasClass("mml_date_format_int")?t.datepicker({altFormat:"yy-mm-dd",altField:"input[name=mml_dateiso]",showAnim:"slideDown",ignoreReadonly:!0,minDate:o,maxDate:"+6m",showOn:"focus",firstDay:1,dateFormat:"d M yy",beforeShow:function(t,a){var m=e(t).offset(),l=e(t).outerHeight(),i=m.top,n=m.left;setTimeout(function(){a.dpDiv.css({top:i+l,left:n})},0)}}).focus():t.datepicker({altFormat:"yy-mm-dd",altField:"input[name=mml_dateiso]",showAnim:"slideDown",ignoreReadonly:!0,minDate:o,maxDate:"+6m",showOn:"focus",firstDay:0,dateFormat:"mm/dd/yy",beforeShow:function(t,a){var m=e(t).offset(),l=e(t).outerHeight(),i=m.top,n=m.left;setTimeout(function(){a.dpDiv.css({top:i+l,left:n})},0)}}).focus()}),e("form.mml_form").on("blur",".mml_moving_date",c),e("form.mml_form").on("change",".mml_moving_date",c),e("form.mml_form").on("focusout",'input[name="mml_delivery_city"]',function(){if(mml_object.googleAPI.length>2){var t,a,m=e(this),l=m.closest("form.mml_form"),i=l.attr("data-abr");switch(i){case"us":t=m.val(),a=l.find('select[name="mml_delivery_state"]').val(),_=t+", "+a+", "+"US";break;case"uk":t=m.val(),_=t+", "+"UK";break;case"ca":t=m.val(),a=l.find('select[name="mml_delivery_state"]').val(),_=t+", "+a+", "+"CA";break;case"au":t=m.val(),a=l.find('select[name="mml_delivery_state"]').val(),_=t+", "+a+", "+"AU";case"nz":t=m.val(),_=t+", "+"NZ"}""!==r&&""!==_&&use_google&&f(r,_,"us"!=i)}}),e("form.mml_form").on("change",'input[name="mml_destination_city"]',function(){var t=e(this).closest("form.mml_form"),a=(t.attr("data-abr"),t.find('input[name="mml_origin_city"]').val()),m=t.find('select[name="mml_origin_country"]').val(),l="";switch(m){case"US":l=t.find('select[name="mml_origin_state_us"]').val(),r=a+", "+l+", "+m;break;case"CA":l=t.find('select[name="mml_origin_state_ca"]').val(),r=a+", "+l+", "+m;break;case"AU":l=t.find('select[name="mml_origin_state_au"]').val(),r=a+", "+l+", "+m;break;default:r=a+", "+m}var i=t.find('input[name="mml_destination_city"]').val(),n=t.find('select[name="mml_destination_country"]').val();switch(n){case"US":end_state=t.find('select[name="mml_delivery_state_us"]').val(),_=i+", "+end_state+", "+n;break;case"CA":end_state=t.find('select[name="mml_delivery_state_ca"]').val(),_=i+", "+end_state+", "+n;break;case"AU":end_state=t.find('select[name="mml_delivery_state_au"]').val(),_=i+", "+end_state+", "+n;break;default:_=i+", "+n}""!==r&&""!==_&&use_google&&f(r,_)}),e(".mml_close").click(function(){e(this).parent().slideUp()}),e("form.mml_form").submit(function(t){var a=e(this),m=a.attr("data-abr"),l=a.attr("data-post"),n=(a.find("input[required=true]"),a.find("div.mml_error")),o=a.find('input[name="failed"]'),s=a.find('input[type="email"].mml_leadform_3198637'),r=a.find('input[type="checkbox"].mml_termstoagree');if(proceed=!0,n.html(),s.val().length>0)e("form.mml_form").fadeOut(),e(".mml_leadform_success").fadeIn(),proceed=!1,console.log("Go away, bot.");else{var _=a.find('input[name="mml_dateiso"]').val(),c=a.find('select[name="mml_size"]').val(),d=a.find('input[name="mml_customer_name"]').val(),f=(a.find('input[name="user_id"]').val(),a.find('input[name="mml_customer_phone"]').val()),u=a.find('input[name="mml_customer_phone"]');f=f.replace(/\D/g,"");"us"!=m&&"ca"!=m||(1==f[0]&&(f=f.substr(1)),10==f.length?u.removeClass("mml_error_field"):(proceed=!1,o.val(o.val()+"|Phone - Not 10 digits"),u.addClass("mml_error_field"),n.html("Please enter valid phone.")));var p=a.find('input[name="mml_customer_email"]').val(),v=a.find('input[name="mml_customer_email"]');p.length<13?(proceed=!1,o.val(o.val()+"|Email - Email too short"),v.addClass("mml_error_field"),n.html("Please enter valid email.")):v.removeClass("mml_error_field");var h=a.find('input[name="failed"]').val();if("int"!==m&&"de"!==m){var g=a.find('input[name="mml_from_zip"]').val();if("uk"!==m||"nz"!==m)var y=a.find('select[name="mml_delivery_state"]').val();else y="";"undefined"==(A=a.find('input[name="mml_delivery_city"]').val())&&(proceed=!1,v.addClass("mml_error_field"),n.html("Please enter valid city name."));var w=a.find('input[name="from_to_country"]').val();if("ca"==m)var b=a.find('input[name="to_country"]').val();else b=a.find('input[name="from_to_country"]').val();post_data={customer_name:d,customer_phone:f,customer_email:p,from_country:w,from_postal_code:g,to_country:b,to_state:y,to_place:e('input[name="mml_delivery_city"]').val().match(/[0-9]/)?null:A,to_postal_code:e('input[name="mml_delivery_city"]').val().match(/[0-9]/)?A:null,size:c,moving_date:_,parent_webpage:mml_object.ref_page,failed:h,post_id:l}}else{w=a.find('select[name="mml_origin_country"]').val();var k=a.find('input[name="mml_origin_city"]').val();"undefined"==k&&(proceed=!1,v.addClass("mml_error_field"),n.html("Please enter valid city name."));var C="";C="US"==w?a.find('select[name="mml_origin_state_us"]').val():"CA"==w?a.find('select[name="mml_origin_state_ca"]').val():"AU"==w?a.find('select[name="mml_origin_state_au"]').val():"";var A;b=a.find('select[name="mml_destination_country"]').val();"undefined"==(A=a.find('input[name="mml_destination_city"]').val())&&(proceed=!1,v.addClass("mml_error_field"),n.html("Please enter valid city name."));y="";y="US"==b?a.find('select[name="mml_delivery_state_us"]').val():"CA"==b?a.find('select[name="mml_delivery_state_ca"]').val():"AU"==b?a.find('select[name="mml_delivery_state_au"]').val():"",post_data={customer_name:d,customer_phone:f,customer_email:p,from_country:w,from_state:C,from_place:k,to_country:b,to_place:e('input[name="mml_destination_city"]').val().match(/[0-9]/)?null:A,to_postal_code:e('input[name="mml_destination_city"]').val().match(/[0-9]/)?A:null,to_state:y,size:c,moving_date:_,parent_webpage:mml_object.ref_page,failed:h,post_id:l}}if(r.length>0&&(r.is(":checked")?r.closest("label").removeClass("mml_error_field"):(r.closest("label").addClass("mml_error_field"),n.html("You must agree on terms of service."),proceed=!1)),proceed){n.html("");var S=a.find("input[type=submit]").val();a.find("input[type=submit]").val("Sending...").prop("disabled",!0).addClass("disabled"),a.hasClass("mml_isadmin")?(e("form.mml_form").fadeOut(),e(".mml_leadform_success").fadeIn(),e(".mml_switch_int-wrap").length>0&&e(".mml_switch_int-wrap").remove(),e(".mml_admin_block").slideDown().html('This test lead was not submitted to MoveAdvisor.<br/>Please note that only real-time leads by visitors are approved as valid leads according to our affiliate agreement.<br/>Your visitors will not see this message.<br/><br/><a href="">Click to visit your MoveAdvisor affiliate account.</a>')):(data={action:"mml_ajax_action",security:mml_object.nonsense,form_data:post_data},e.ajax({url:mml_ajax_url.ajaxurl,async:!0,type:"POST",data:data,dataType:"json",success:function(t){if("error"!==t.status){if("1"==mml_object.totrack)try{"function"==typeof gtag?gtag("event",m,{event_category:"MoveAdvisor Form",event_label:"Successfully-Sent"}):"function"==typeof ga?ga("send","event","MoveAdvisor Form",m,"Successfully-Sent"):"function"==typeof _gaq&&_gaq.push(["_trackEvent","MoveAdvisor Form",m,"Successfully-Sent"])}catch(e){console.log("No Google Analytics active")}if(e("form.mml_form").fadeOut(),t.ic&&1===t.ic){let t="";switch(m){case"uk":t="0800 086 9039";break;case"au":t="1800 952 370";break;case"nz":t="0800 244 266";break;case"ie":t="1 800 81 6551";break;default:t="+1 (800) 680-6439"}e("#call-transfer-number-success").text(t),e(".mml_leadform_phonecall_success").fadeIn()}else e(".mml_leadform_success").fadeIn();e(".mml_switch_int-wrap").length>0&&e(".mml_switch_int-wrap").remove(),"Demo Test Successful."===t.text&&e(".mml_leadform_success").append('<div class="demo_warning">This is a Demo Test.<br/>Please contact your MoveAdvisor representative to get an active API key.</div>')}else{var l=t.errors;for(i=0;i<l.length;i++)-1!==l[i].indexOf("name")?o.val(o.val()+"|Name - "+l[i]+" ("+d+")"):-1!==l[i].indexOf("phone")?o.val(o.val()+"|Phone - "+l[i]+" ("+f+")"):-1!==l[i].indexOf("E-Mail")?o.val(o.val()+"|Email - "+l[i]+" ("+p+")"):o.val(o.val()+"|"+l[i]);a.effect("shake"),n.html(l[0])}a.find("input[type=submit]").val(S).prop("disabled",!1).removeClass("disabled")},error:function(e){console.log(e),a.effect("shake"),n.html(e.errors+" Please try again."),a.find("input[type=submit]").val(S).prop("disabled",!1).removeClass("disabled")}}))}else a.effect("shake"),console.log("Something is wrong with the form")}t.preventDefault()});var p=null;e("form.mml_form").on("keypress",".mml_from_zip",function(){if(mml_object.googleAPI.length>2){var t=e(this),a=t.attr("data-abr");null!=p&&(clearTimeout(p),p=null),p=setTimeout(function(){!function(t,a){var m="";switch(form=a.closest("form.mml_form"),t){case"uk":m="GB";break;case"us":m="US";break;case"ca":m="CA";break;case"au":m="AU";break;case"nz":m="NZ";break;case"usa":m="US"}postal_code=e(".mml_from_zip").val(),address=e(".mml_from_zip").val()+", "+("GB"==m?"UK":m),geocoder=new google.maps.Geocoder,geocoder.geocode({address:address,country:m},function(t,a){var l,i,n,o=!1,s=!1,_=!1;"OK"==a&&e.each(t,function(t,a){if(s=!1,_=!1,e.each(a.address_components,function(e,t){"postal_code"==t.types[0]&&(t.short_name==postal_code.toUpperCase()?_=!0:t.short_name==postal_code.substring(0,3).toUpperCase()&&"US"!==m&&(_=!0)),"country"==t.types[0]&&t.short_name==m&&(s=!0),"administrative_area_level_1"==t.types[0]&&(i=t.short_name),"US"==m||"CA"==m||"AU"==m?"locality"==t.types[0]&&(l=t.long_name):"GB"==m&&"postal_town"==t.types[0]&&(l=t.long_name)}),1==s&&1==_)return n=(void 0!==l?l+", ":"")+(void 0!==i?i:""),form.find(".mml_from-city").html(n),r=a.formatted_address,void(o=!0)}),o||(e(".mml_from-city").empty(),r="")})}(a,t)},500)}}),e("form.mml_form").on("change","select[name=mml_origin_country]",function(){var t=e(this).closest("form.mml_form"),a=e(this).parent();"US"==e(this).val()?(a.removeClass("mml_col-xs-12").addClass("mml_col-xs-6"),t.find(".mml_originstate_wrap.mml_int_us").show(),t.find(".mml_originstate_wrap.mml_int_ca").hide(),t.find(".mml_originstate_wrap.mml_int_au").hide(),t.find(".mml_originstate_wrap.mml_int_us > select").prop("required",!0),t.find(".mml_originstate_wrap.mml_int_ca > select").prop("required",!1),t.find(".mml_originstate_wrap.mml_int_au > select").prop("required",!1)):"CA"==e(this).val()?(a.removeClass("mml_col-xs-12").addClass("mml_col-xs-6"),t.find(".mml_originstate_wrap.mml_int_us").hide(),t.find(".mml_originstate_wrap.mml_int_ca").show(),t.find(".mml_originstate_wrap.mml_int_au").hide(),t.find(".mml_originstate_wrap.mml_int_us > select").prop("required",!1),t.find(".mml_originstate_wrap.mml_int_ca > select").prop("required",!0),t.find(".mml_originstate_wrap.mml_int_au > select").prop("required",!1)):"AU"==e(this).val()?(a.removeClass("mml_col-xs-12").addClass("mml_col-xs-6"),t.find(".mml_originstate_wrap.mml_int_us").hide(),t.find(".mml_originstate_wrap.mml_int_ca").hide(),t.find(".mml_originstate_wrap.mml_int_au").show(),t.find(".mml_originstate_wrap.mml_int_us > select").prop("required",!1),t.find(".mml_originstate_wrap.mml_int_ca > select").prop("required",!1),t.find(".mml_originstate_wrap.mml_int_au > select").prop("required",!0)):(a.removeClass("mml_col-xs-6").addClass("mml_col-xs-12"),t.find(".mml_originstate_wrap.mml_int_us").hide(),t.find(".mml_originstate_wrap.mml_int_ca").hide(),t.find(".mml_originstate_wrap.mml_int_au").hide(),t.find(".mml_originstate_wrap.mml_int_us > select").prop("required",!1),t.find(".mml_originstate_wrap.mml_int_ca > select").prop("required",!1),t.find(".mml_originstate_wrap.mml_int_au > select").prop("required",!1))}),e("form.mml_form").on("change","select[name=mml_destination_country]",function(){var t=e(this).closest("form.mml_form"),a=e(this).parent();"US"==e(this).val()?(a.removeClass("mml_col-xs-12").addClass("mml_col-xs-6"),t.find(".mml_deliverystate_wrap.mml_int_us").show(),t.find(".mml_deliverystate_wrap.mml_int_ca").hide(),t.find(".mml_deliverystate_wrap.mml_int_au").hide(),t.find(".mml_deliverystate_wrap.mml_int_us > select").prop("required",!0),t.find(".mml_deliverystate_wrap.mml_int_ca > select").prop("required",!1),t.find(".mml_deliverystate_wrap.mml_int_au > select").prop("required",!1)):"CA"==e(this).val()?(a.removeClass("mml_col-xs-12").addClass("mml_col-xs-6"),t.find(".mml_deliverystate_wrap.mml_int_us").hide(),t.find(".mml_deliverystate_wrap.mml_int_ca").show(),t.find(".mml_deliverystate_wrap.mml_int_au").hide(),t.find(".mml_deliverystate_wrap.mml_int_us > select").prop("required",!1),t.find(".mml_deliverystate_wrap.mml_int_ca > select").prop("required",!0),t.find(".mml_deliverystate_wrap.mml_int_au > select").prop("required",!1)):"AU"==e(this).val()?(a.removeClass("mml_col-xs-12").addClass("mml_col-xs-6"),t.find(".mml_deliverystate_wrap.mml_int_us").hide(),t.find(".mml_deliverystate_wrap.mml_int_ca").hide(),t.find(".mml_deliverystate_wrap.mml_int_au").show(),t.find(".mml_deliverystate_wrap.mml_int_us > select").prop("required",!1),t.find(".mml_deliverystate_wrap.mml_int_ca > select").prop("required",!1),t.find(".mml_deliverystate_wrap.mml_int_au > select").prop("required",!0)):(a.removeClass("mml_col-xs-6").addClass("mml_col-xs-12"),t.find(".mml_deliverystate_wrap.mml_int_us").hide(),t.find(".mml_deliverystate_wrap.mml_int_ca").hide(),t.find(".mml_deliverystate_wrap.mml_int_au").hide(),t.find(".mml_deliverystate_wrap.mml_int_us > select").prop("required",!1),t.find(".mml_deliverystate_wrap.mml_int_ca > select").prop("required",!1),t.find(".mml_deliverystate_wrap.mml_int_au > select").prop("required",!1))}),e("form.mml_form").on("change","select[name=mml_delivery_state]",function(){var t=e(this).closest("form.mml_form"),a=e(this).val().toLowerCase(),m="";"ca"==t.attr("data-abr")?"US"==e("option:selected",this).closest("optgroup").attr("id")?(t.find('input[name="to_country"]').val("US"),m=mml_object.plugin+"assets/typeahead/us/"+a+".json"):(t.find('input[name="to_country"]').val("CA"),m=mml_object.plugin+"assets/typeahead/ca/"+a+".json"):"us"==t.attr("data-abr")?m=mml_object.plugin+"assets/typeahead/us/"+a+".json":"au"==t.attr("data-abr")&&(m=mml_object.plugin+"assets/typeahead/au/"+a+".json");e.get(m,function(e){s=e}).fail(function(e){console.log(e),s=[]});var l=t.find('input[name="mml_delivery_city"]');e(l).replaceWith(l.clone())}),e("form.mml_form").on("change",".mml_stateselect",function(){var t=e(this).closest("form.mml_form"),a=e(this).val().toLowerCase();e(this).parent().hasClass("mml_originstate_wrap")?(country=t.find("select[name=mml_origin_country]").val(),input=t.find('input[name="mml_origin_city"]')):(country=t.find("select[name=mml_destination_country]").val(),input=t.find('input[name="mml_destination_city"]'));var m;m=mml_object.plugin+"assets/typeahead/"+country.toLowerCase()+"/"+a+".json",e.get(m,function(e){s=e}).fail(function(e){console.log(e),s=[]}),e(input).replaceWith(input.clone())}),e("form.mml_form").on("change",".mml_countryselect",function(){var a=e(this).closest("form.mml_form");e(this).parent().hasClass("mml_origincountry_wrap")?input=a.find('input[name="mml_origin_city"]'):input=a.find('input[name="mml_destination_city"]');var m=e(this).val().toLowerCase();-1!=e.inArray(m,t)&&(typeahead_source_url=mml_object.plugin+"assets/typeahead/"+m+".json",e.get(typeahead_source_url,function(e){s=e}).fail(function(e){console.log(e),s=[]})),e(input).replaceWith(input.clone())}),e("form.mml_form").on("focusin",".mml_to_city_nz > input",function(){e(this).closest("form.mml_form");var t=mml_object.plugin+"assets/typeahead/nz.json",a=e(this);e.get(t,function(e){s=e}).fail(function(e){console.log(e),s=[]}).done(function(){try{a.mml_typeahead({source:s,items:4})}catch(e){console.log(e)}})}),e("form.mml_form").on("focus",'input[name="mml_delivery_city"]',function(){var t=e(this).closest("form.mml_form").attr("data-abr"),a=e(this);if(s.length>0&&"uk"!==t)try{a.mml_typeahead({source:s,items:4})}catch(e){console.log(e)}}),e("form.mml_form").on("focusin","input.mml_cityfield",function(){var m=e(this).closest("form.mml_form"),i=e(this);if("mml_origin_city"==i.attr("name"))var n=m.find('select[name="mml_origin_country"]').val();else n=m.find('select[name="mml_destination_country"]').val();if(null!==n&&(n=n.toLowerCase()),-1!=e.inArray(n,t)||-1!=e.inArray(n,a)){if(s.length>0)try{i.mml_typeahead({source:s,items:4})}catch(e){console.log(e)}}else l(i,n)}),e("form.mml_form").on("click",".mml_infoicon",function(t){var a,m=e(this).closest("form.mml_form").find(".mml_popup.mml_popup_termsofservice"),l=e(".mml_popup.mml_popup_termsofservice span.mml_linkservices");a="1"==mml_object.default_privacy?'<a href="'+mml_object.plugin+'assets/files/mml-tou-pp.htm" target="_blank" rel="nofollow">Read terms of service.</a>':"<strong>Read terms of service below.</strong>",l.html(a),"none"==m.css("display")?m.fadeIn(350):m.fadeOut(350),t.preventDefault()}),e(document).on("click",function(t){e(t.target).is(".mml_infoicon")||e(".mml_popup.mml_popup_termsofservice").fadeOut(350)})})}(jQuery);